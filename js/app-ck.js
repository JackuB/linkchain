// Knockout JavaScript library v2.3.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)
function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function isUrl(e){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(e)?!0:!1}function searchStringInArray(e,t){e=e.toLowerCase();for(var n=0;n<t.length;n++)if(t[n].toLowerCase().match(e))return n;return-1}function httpGet(e){var t=null;t=new XMLHttpRequest;t.open("GET",e,!1);t.send(null);return t.responseText}function linkchain(e,t){var n=this;n.userDisplayName=ko.observable(t);n.userId=ko.observable(e);n.searchInput=ko.observable("");n.searchThis=function(e){n.searchInput()==e?n.searchInput(""):n.searchInput(e)};n.items=KnockoutFire.observable(firebaseRefLinks,{".reverse":!0,$links:{title:!0,url:!0,tags:!0,author:!0},".newItem":{".priority":function(){return Date.now()},".on_success":function(){n.linkTitle("");n.linkToAdd("");n.tagsToAdd("");n.showSidebar(!1);pckry.layout()},title:function(){return n.linkTitle()},url:function(){return n.linkToAdd()},author:function(){return n.userId()},tags:function(){return n.tagsToAdd().split(/[ ,]+/)}}});n.removeItem=function(e){firebaseRefLinks.child(e.firebase.name()).remove()};firebaseRefLinks.on("value",function(){pckry.reloadItems()});n.isVisible=function(e){pckry.layout();return n.searchInput()==""?!0:e.title().toLowerCase().search(n.searchInput().toLowerCase())!=-1||e.author().toLowerCase().search(n.searchInput().toLowerCase())!=-1||e.url().toLowerCase().search(n.searchInput().toLowerCase())!=-1||searchStringInArray(n.searchInput(),e.tags())!=-1?!0:!1};n.linkToAdd=ko.observable("");n.linkTitle=ko.observable("");n.tagsToAdd=ko.observable("");n.getLinkMeta=ko.computed(function(){n.linkToAdd().length>4&&isUrl(n.linkToAdd())&&n.loadTitle(n.linkToAdd())}).extend({throttle:500});n.loadTitle=function(e){var t=JSON.parse(httpGet("http://radar.runway7.net?url="+n.linkToAdd()));typeof t.title=="undefined"?n.loadTitle(e):n.linkTitle(t.title)};n.showSidebar=ko.observable(!1);n.showAddLinkForm=function(){n.showSidebar(!n.showSidebar())};n.boardUsers=ko.computed(function(){var e=n.items().length,t=[];for(var r=0;r<e;r++)t.push(n.items()[r]().author());return ko.utils.arrayGetDistinctValues(t).sort()}).extend({throttle:1e3})}(function(){function F(e){return function(){return e}}(function(q){var w=this||(0,eval)("this"),s=w.document,H=w.navigator,t=w.jQuery,y=w.JSON;(function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],e):e(w.ko={})})(function(e){function n(e,t,n,r){i.d[e]={init:function(e){i.a.f.set(e,f,{});return{controlsDescendantBindings:!0}},update:function(e,s,o,u,a){o=i.a.f.get(e,f);s=i.a.c(s());u=!n!=!s;var l=!o.fb;if(l||t||u!==o.vb)l&&(o.fb=i.a.Oa(i.e.childNodes(e),!0)),u?(l||i.e.P(e,i.a.Oa(o.fb)),i.Ja(r?r(a,s):a,e)):i.e.ba(e),o.vb=u}};i.g.S[e]=!1;i.e.L[e]=!0}function r(e,t,n){n&&t!==i.h.n(e)&&i.h.W(e,t);t!==i.h.n(e)&&i.q.I(i.a.Ga,null,[e,"change"])}var i="undefined"!=typeof e?e:{};i.b=function(e,t){for(var n=e.split("."),r=i,s=0;s<n.length-1;s++)r=r[n[s]];r[n[n.length-1]]=t};i.r=function(e,t,n){e[t]=n};i.version="2.3.0";i.b("version",i.version);i.a=function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e,t){if("input"!==i.a.u(e)||!e.type||"click"!=t.toLowerCase())return!1;var n=e.type;return"checkbox"==n||"radio"==n}var r={},o={};r[H&&/Firefox\/2/i.test(H.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];r.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");e(r,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)o[t[n]]=e});var u={propertychange:!0},a=s&&function(){for(var e=3,t=s.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return 4<e?e:q}();return{Ta:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],p:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n])},k:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},La:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r]))return e[r];return null},ka:function(e,t){var n=i.a.k(e,t);0<=n&&e.splice(n,1)},Ma:function(e){e=e||[];for(var t=[],n=0,r=e.length;n<r;n++)0>i.a.k(t,e[n])&&t.push(e[n]);return t},Z:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)n.push(t(e[r]));return n},Y:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)t(e[r])&&n.push(e[r]);return n},R:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},ja:function(e,t,n){var r=e.indexOf?e.indexOf(t):i.a.k(e,t);0>r?n&&e.push(t):n||e.splice(r,1)},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},w:e,oa:function(e){for(;e.firstChild;)i.removeNode(e.firstChild)},Mb:function(e){e=i.a.N(e);for(var t=s.createElement("div"),n=0,r=e.length;n<r;n++)t.appendChild(i.H(e[n]));return t},Oa:function(e,t){for(var n=0,r=e.length,s=[];n<r;n++){var o=e[n].cloneNode(!0);s.push(t?i.H(o):o)}return s},P:function(e,t){i.a.oa(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},eb:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],s=r.parentNode,o=0,u=t.length;o<u;o++)s.insertBefore(t[o],r);o=0;for(u=n.length;o<u;o++)i.removeNode(n[o])}},hb:function(e,t){7>a?e.setAttribute("selected",t):e.selected=t},F:function(e){return null===e||e===q?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Wb:function(e,t){for(var n=[],r=(e||"").split(t),s=0,o=r.length;s<o;s++){var u=i.a.F(r[s]);""!==u&&n.push(u)}return n},Tb:function(e,t){e=e||"";return t.length>e.length?!1:e.substring(0,t.length)===t},yb:function(e,t){if(t.compareDocumentPosition)return 16==(t.compareDocumentPosition(e)&16);for(;null!=e;){if(e==t)return!0;e=e.parentNode}return!1},aa:function(e){return i.a.yb(e,e.ownerDocument)},pb:function(e){return!!i.a.La(e,i.a.aa)},u:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},o:function(e,r,s){var o=a&&u[r];if(o||"undefined"==typeof t)if(o||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var f=function(t){s.call(e,t)},l="on"+r;e.attachEvent(l,f);i.a.C.ia(e,function(){e.detachEvent(l,f)})}else e.addEventListener(r,s,!1);else{if(n(e,r)){var h=s;s=function(e,t){var n=this.checked;t&&(this.checked=!0!==t.sb);h.call(this,e);this.checked=n}}t(e).bind(r,s)}},Ga:function(e,r){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof t){var i=[];n(e,r)&&i.push({sb:e.checked});t(e).trigger(r,i)}else if("function"==typeof s.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");i=s.createEvent(o[r]||"HTMLEvents"),i.initEvent(r,!0,!0,w,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(i)}else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");n(e,r)&&(e.checked=!0!==e.checked),e.fireEvent("on"+r)}},c:function(e){return i.T(e)?e():e},ya:function(e){return i.T(e)?e.t():e},ga:function(e,t,n){if(t){var r=/\S+/g,s=e.className.match(r)||[];i.a.p(t.match(r),function(e){i.a.ja(s,e,n)});e.className=s.join(" ")}},ib:function(e,t){var n=i.a.c(t);if(null===n||n===q)n="";var r=i.e.firstChild(e);!r||3!=r.nodeType||i.e.nextSibling(r)?i.e.P(e,[s.createTextNode(n)]):r.data=n;i.a.Bb(e)},gb:function(e,t){e.name=t;if(7>=a)try{e.mergeAttributes(s.createElement("<input name='"+e.name+"'/>"),!1)}catch(n){}},Bb:function(e){9<=a&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},zb:function(e){if(a){var t=e.style.width;e.style.width=0;e.style.width=t}},Qb:function(e,t){e=i.a.c(e);t=i.a.c(t);for(var n=[],r=e;r<=t;r++)n.push(r);return n},N:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},Ub:6===a,Vb:7===a,ca:a,Ua:function(e,t){for(var n=i.a.N(e.getElementsByTagName("input")).concat(i.a.N(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},s=[],o=n.length-1;0<=o;o--)r(n[o])&&s.push(n[o]);return s},Nb:function(e){return"string"==typeof e&&(e=i.a.F(e))?y&&y.parse?y.parse(e):(new Function("return "+e))():null},Ca:function(e,t,n){if(!y||!y.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return y.stringify(i.a.c(e),t,n)},Ob:function(t,n,r){r=r||{};var o=r.params||{},u=r.includeFields||this.Ta,a=t;if("object"==typeof t&&"form"===i.a.u(t))for(var a=t.action,f=u.length-1;0<=f;f--)for(var l=i.a.Ua(t,u[f]),c=l.length-1;0<=c;c--)o[l[c].name]=l[c].value;n=i.a.c(n);var h=s.createElement("form");h.style.display="none";h.action=a;h.method="post";for(var p in n)t=s.createElement("input"),t.name=p,t.value=i.a.Ca(i.a.c(n[p])),h.appendChild(t);e(o,function(e,t){var n=s.createElement("input");n.name=e;n.value=t;h.appendChild(n)});s.body.appendChild(h);r.submitter?r.submitter(h):h.submit();setTimeout(function(){h.parentNode.removeChild(h)},0)}}}();i.b("utils",i.a);i.b("utils.arrayForEach",i.a.p);i.b("utils.arrayFirst",i.a.La);i.b("utils.arrayFilter",i.a.Y);i.b("utils.arrayGetDistinctValues",i.a.Ma);i.b("utils.arrayIndexOf",i.a.k);i.b("utils.arrayMap",i.a.Z);i.b("utils.arrayPushAll",i.a.R);i.b("utils.arrayRemoveItem",i.a.ka);i.b("utils.extend",i.a.extend);i.b("utils.fieldsIncludedWithJsonPost",i.a.Ta);i.b("utils.getFormFields",i.a.Ua);i.b("utils.peekObservable",i.a.ya);i.b("utils.postJson",i.a.Ob);i.b("utils.parseJson",i.a.Nb);i.b("utils.registerEventHandler",i.a.o);i.b("utils.stringifyJson",i.a.Ca);i.b("utils.range",i.a.Qb);i.b("utils.toggleDomNodeCssClass",i.a.ga);i.b("utils.triggerEvent",i.a.Ga);i.b("utils.unwrapObservable",i.a.c);i.b("utils.objectForEach",i.a.w);i.b("utils.addOrRemoveItem",i.a.ja);i.b("unwrap",i.a.c);Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments);e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}});i.a.f=new function(){var e=0,t="__ko__"+(new Date).getTime(),n={};return{get:function(e,t){var n=i.a.f.pa(e,!1);return n===q?q:n[t]},set:function(e,t,n){if(n!==q||i.a.f.pa(e,!1)!==q)i.a.f.pa(e,!0)[t]=n},pa:function(r,i){var s=r[t];if(!s||"null"===s||!n[s]){if(!i)return q;s=r[t]="ko"+e++;n[s]={}}return n[s]},clear:function(e){var r=e[t];return r?(delete n[r],e[t]=null,!0):!1}}};i.b("utils.domData",i.a.f);i.b("utils.domData.clear",i.a.f.clear);i.a.C=new function(){function e(e,t){var n=i.a.f.get(e,r);n===q&&t&&(n=[],i.a.f.set(e,r,n));return n}function n(r){var s=e(r,!1);if(s)for(var s=s.slice(0),u=0;u<s.length;u++)s[u](r);i.a.f.clear(r);"function"==typeof t&&"function"==typeof t.cleanData&&t.cleanData([r]);if(o[r.nodeType])for(s=r.firstChild;r=s;)s=r.nextSibling,8===r.nodeType&&n(r)}var r="__ko_domNodeDisposal__"+(new Date).getTime(),s={1:!0,8:!0,9:!0},o={1:!0,9:!0};return{ia:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},cb:function(t,n){var s=e(t,!1);s&&(i.a.ka(s,n),0==s.length&&i.a.f.set(t,r,q))},H:function(e){if(s[e.nodeType]&&(n(e),o[e.nodeType])){var t=[];i.a.R(t,e.getElementsByTagName("*"));for(var r=0,u=t.length;r<u;r++)n(t[r])}return e},removeNode:function(e){i.H(e);e.parentNode&&e.parentNode.removeChild(e)}}};i.H=i.a.C.H;i.removeNode=i.a.C.removeNode;i.b("cleanNode",i.H);i.b("removeNode",i.removeNode);i.b("utils.domNodeDisposal",i.a.C);i.b("utils.domNodeDisposal.addDisposeCallback",i.a.C.ia);i.b("utils.domNodeDisposal.removeDisposeCallback",i.a.C.cb);(function(){i.a.xa=function(e){var n;if("undefined"!=typeof t){if(t.parseHTML)n=t.parseHTML(e)||[];else if((n=t.clean([e]))&&n[0]){for(e=n[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{var r=i.a.F(e).toLowerCase();n=s.createElement("div");r=r.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];e="ignored<div>"+r[1]+e+r[2]+"</div>";for("function"==typeof w.innerShiv?n.appendChild(w.innerShiv(e)):n.innerHTML=e;r[0]--;)n=n.lastChild;n=i.a.N(n.lastChild.childNodes)}return n};i.a.fa=function(e,n){i.a.oa(e);n=i.a.c(n);if(null!==n&&n!==q)if("string"!=typeof n&&(n=n.toString()),"undefined"!=typeof t)t(e).html(n);else for(var r=i.a.xa(n),s=0;s<r.length;s++)e.appendChild(r[s])}})();i.b("utils.parseHtmlFragment",i.a.xa);i.b("utils.setHtml",i.a.fa);i.s=function(){function e(t,n){if(t)if(8==t.nodeType){var r=i.s.$a(t.nodeValue);null!=r&&n.push({xb:t,Kb:r})}else if(1==t.nodeType)for(var r=0,s=t.childNodes,o=s.length;r<o;r++)e(s[r],n)}var t={};return{va:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);t[n]=e;return"<!--[ko_memo:"+n+"]-->"},mb:function(e,n){var r=t[e];if(r===q)throw Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return r.apply(null,n||[]),!0}finally{delete t[e]}},nb:function(t,n){var r=[];e(t,r);for(var s=0,o=r.length;s<o;s++){var u=r[s].xb,a=[u];n&&i.a.R(a,n);i.s.mb(r[s].Kb,a);u.nodeValue="";u.parentNode&&u.parentNode.removeChild(u)}},$a:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}();i.b("memoization",i.s);i.b("memoization.memoize",i.s.va);i.b("memoization.unmemoize",i.s.mb);i.b("memoization.parseMemoText",i.s.$a);i.b("memoization.unmemoizeDomNodeAndDescendants",i.s.nb);i.Sa={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return i.j({read:e,write:function(r){clearTimeout(n);n=setTimeout(function(){e(r)},t)}})},notify:function(e,t){e.equalityComparer="always"==t?F(!1):i.m.fn.equalityComparer;return e}};i.b("extenders",i.Sa);i.kb=function(e,t,n){this.target=e;this.la=t;this.wb=n;i.r(this,"dispose",this.B)};i.kb.prototype.B=function(){this.Hb=!0;this.wb()};i.V=function(){this.G={};i.a.extend(this,i.V.fn);i.r(this,"subscribe",this.Da);i.r(this,"extend",this.extend);i.r(this,"getSubscriptionsCount",this.Db)};i.V.fn={Da:function(e,t,n){n=n||"change";var r=new i.kb(this,t?e.bind(t):e,function(){i.a.ka(this.G[n],r)}.bind(this));this.G[n]||(this.G[n]=[]);this.G[n].push(r);return r},notifySubscribers:function(e,t){t=t||"change";this.G[t]&&i.q.I(function(){i.a.p(this.G[t].slice(0),function(t){t&&!0!==t.Hb&&t.la(e)})},this)},Db:function(){var e=0;i.a.w(this.G,function(t,n){e+=n.length});return e},extend:function(e){var t=this;e&&i.a.w(e,function(e,n){var r=i.Sa[e];"function"==typeof r&&(t=r(t,n))});return t}};i.Wa=function(e){return null!=e&&"function"==typeof e.Da&&"function"==typeof e.notifySubscribers};i.b("subscribable",i.V);i.b("isSubscribable",i.Wa);i.q=function(){var e=[];return{rb:function(t){e.push({la:t,Ra:[]})},end:function(){e.pop()},bb:function(t){if(!i.Wa(t))throw Error("Only subscribable things can act as dependencies");if(0<e.length){var n=e[e.length-1];!n||0<=i.a.k(n.Ra,t)||(n.Ra.push(t),n.la(t))}},I:function(t,n,r){try{return e.push(null),t.apply(n,r||[])}finally{e.pop()}}}}();var o={"undefined":!0,"boolean":!0,number:!0,string:!0};i.m=function(e){function t(){if(0<arguments.length)return t.equalityComparer&&t.equalityComparer(n,arguments[0])||(t.K(),n=arguments[0],t.J()),this;i.q.bb(t);return n}var n=e;i.V.call(t);t.t=function(){return n};t.J=function(){t.notifySubscribers(n)};t.K=function(){t.notifySubscribers(n,"beforeChange")};i.a.extend(t,i.m.fn);i.r(t,"peek",t.t);i.r(t,"valueHasMutated",t.J);i.r(t,"valueWillMutate",t.K);return t};i.m.fn={equalityComparer:function(e,t){return null===e||typeof e in o?e===t:!1}};var u=i.m.Pb="__ko_proto__";i.m.fn[u]=i.m;i.qa=function(e,t){return null===e||e===q||e[u]===q?!1:e[u]===t?!0:i.qa(e[u],t)};i.T=function(e){return i.qa(e,i.m)};i.Xa=function(e){return"function"==typeof e&&e[u]===i.m||"function"==typeof e&&e[u]===i.j&&e.Eb?!0:!1};i.b("observable",i.m);i.b("isObservable",i.T);i.b("isWriteableObservable",i.Xa);i.U=function(e){e=e||[];if("object"==typeof e&&"length"in e){e=i.m(e);i.a.extend(e,i.U.fn);return e}throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")};i.U.fn={remove:function(e){for(var t=this.t(),n=[],r="function"==typeof e?e:function(t){return t===e},i=0;i<t.length;i++){var s=t[i];r(s)&&(0===n.length&&this.K(),n.push(s),t.splice(i,1),i--)}n.length&&this.J();return n},removeAll:function(e){if(e===q){var t=this.t(),n=t.slice(0);this.K();t.splice(0,t.length);this.J();return n}return e?this.remove(function(t){return 0<=i.a.k(e,t)}):[]},destroy:function(e){var t=this.t(),n="function"==typeof e?e:function(t){return t===e};this.K();for(var r=t.length-1;0<=r;r--)n(t[r])&&(t[r]._destroy=!0);this.J()},destroyAll:function(e){return e===q?this.destroy(F(!0)):e?this.destroy(function(t){return 0<=i.a.k(e,t)}):[]},indexOf:function(e){var t=this();return i.a.k(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.K(),this.t()[n]=t,this.J())}};i.a.p("pop push reverse shift sort splice unshift".split(" "),function(e){i.U.fn[e]=function(){var t=this.t();this.K();t=t[e].apply(t,arguments);this.J();return t}});i.a.p(["slice"],function(e){i.U.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}});i.b("observableArray",i.U);i.j=function(e,t,n){function r(){i.a.p(g,function(e){e.B()});g=[]}function s(){var e=u.throttleEvaluation;e&&0<=e?(clearTimeout(y),y=setTimeout(o,e)):o()}function o(){if(!c)if(l&&v())m();else{c=!0;try{var e=i.a.Z(g,function(e){return e.target});i.q.rb(function(t){var n;0<=(n=i.a.k(e,t))?e[n]=q:g.push(t.Da(s))});for(var n=h.call(t),r=e.length-1;0<=r;r--)e[r]&&g.splice(r,1)[0].B();l=!0;u.notifySubscribers(f,"beforeChange");f=n;u.notifySubscribers(f)}finally{i.q.end(),c=!1}g.length||m()}}function u(){if(0<arguments.length){if("function"!=typeof p)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");p.apply(t,arguments);return this}l||o();i.q.bb(u);return f}function a(){return!l||0<g.length}var f,l=!1,c=!1,h=e;h&&"object"==typeof h?(n=h,h=n.read):(n=n||{},h||(h=n.read));if("function"!=typeof h)throw Error("Pass a function that returns the value of the ko.computed");var p=n.write,d=n.disposeWhenNodeIsRemoved||n.$||null,v=n.disposeWhen||n.Qa||F(!1),m=r,g=[],y=null;t||(t=n.owner);u.t=function(){l||o();return f};u.Cb=function(){return g.length};u.Eb="function"==typeof n.write;u.B=function(){m()};u.ta=a;i.V.call(u);i.a.extend(u,i.j.fn);i.r(u,"peek",u.t);i.r(u,"dispose",u.B);i.r(u,"isActive",u.ta);i.r(u,"getDependenciesCount",u.Cb);!0!==n.deferEvaluation&&o();if(d&&a()){m=function(){i.a.C.cb(d,m);r()};i.a.C.ia(d,m);var b=v,v=function(){return!i.a.aa(d)||b()}}return u};i.Gb=function(e){return i.qa(e,i.j)};e=i.m.Pb;i.j[e]=i.m;i.j.fn={};i.j.fn[e]=i.j;i.b("dependentObservable",i.j);i.b("computed",i.j);i.b("isComputed",i.Gb);(function(){function e(r,i,s){s=s||new n;r=i(r);if("object"!=typeof r||null===r||r===q||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var o=r instanceof Array?[]:{};s.save(r,o);t(r,function(t){var n=i(r[t]);switch(typeof n){case"boolean":case"number":case"string":case"function":o[t]=n;break;case"object":case"undefined":var u=s.get(n);o[t]=u!==q?u:e(n,i,s)}});return o}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function n(){this.keys=[];this.Ha=[]}i.lb=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;i.T(e)&&10>t;t++)e=e();return e})};i.toJSON=function(e,t,n){e=i.lb(e);return i.a.Ca(e,t,n)};n.prototype={save:function(e,t){var n=i.a.k(this.keys,e);0<=n?this.Ha[n]=t:(this.keys.push(e),this.Ha.push(t))},get:function(e){e=i.a.k(this.keys,e);return 0<=e?this.Ha[e]:q}}})();i.b("toJS",i.lb);i.b("toJSON",i.toJSON);(function(){i.h={n:function(e){switch(i.a.u(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?i.a.f.get(e,i.d.options.wa):7>=i.a.ca?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?i.h.n(e.options[e.selectedIndex]):q;default:return e.value}},W:function(e,t){switch(i.a.u(e)){case"option":switch(typeof t){case"string":i.a.f.set(e,i.d.options.wa,q);"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__;e.value=t;break;default:i.a.f.set(e,i.d.options.wa,t),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof t?t:""}break;case"select":""===t&&(t=q);if(null===t||t===q)e.selectedIndex=-1;for(var n=e.options.length-1;0<=n;n--)if(i.h.n(e.options[n])==t){e.selectedIndex=n;break}1<e.size||-1!==e.selectedIndex||(e.selectedIndex=0);break;default:if(null===t||t===q)t="";e.value=t}}}})();i.b("selectExtensions",i.h);i.b("selectExtensions.readValue",i.h.n);i.b("selectExtensions.writeValue",i.h.W);i.g=function(){function e(e,n){for(var r=null;e!=r;)r=e,e=e.replace(t,function(e,t){return n[t]});return e}var t=/\@ko_token_(\d+)\@/g,n=["true","false","null","undefined"],r=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;return{S:[],da:function(t){var n=i.a.F(t);if(3>n.length)return[];"{"===n.charAt(0)&&(n=n.substring(1,n.length-1));t=[];for(var r=null,s,o=0;o<n.length;o++){var u=n.charAt(o);if(null===r)switch(u){case'"':case"'":case"/":r=o,s=u}else if(u==s&&"\\"!==n.charAt(o-1)){u=n.substring(r,o+1);t.push(u);var a="@ko_token_"+(t.length-1)+"@",n=n.substring(0,r)+a+n.substring(o+1),o=o-(u.length-a.length),r=null}}s=r=null;for(var f=0,l=null,o=0;o<n.length;o++){u=n.charAt(o);if(null===r)switch(u){case"{":r=o;l=u;s="}";break;case"(":r=o;l=u;s=")";break;case"[":r=o,l=u,s="]"}u===l?f++:u===s&&(f--,0===f&&(u=n.substring(r,o+1),t.push(u),a="@ko_token_"+(t.length-1)+"@",n=n.substring(0,r)+a+n.substring(o+1),o-=u.length-a.length,r=null))}s=[];n=n.split(",");r=0;for(o=n.length;r<o;r++)f=n[r],l=f.indexOf(":"),0<l&&l<f.length-1?(u=f.substring(l+1),s.push({key:e(f.substring(0,l),t),value:e(u,t)})):s.push({unknown:e(f,t)});return s},ea:function(e){var t="string"==typeof e?i.g.da(e):e,s=[];e=[];for(var o,u=0;o=t[u];u++)if(0<s.length&&s.push(","),o.key){var a;e:{a=o.key;var f=i.a.F(a);switch(f.length&&f.charAt(0)){case"'":case'"':break e;default:a="'"+f+"'"}}o=o.value;s.push(a);s.push(":");s.push(o);o=i.a.F(o);0<=i.a.k(n,i.a.F(o).toLowerCase())?o=!1:(f=o.match(r),o=null===f?!1:f[1]?"Object("+f[1]+")"+f[2]:o);o&&(0<e.length&&e.push(", "),e.push(a+" : function(__ko_value) { "+o+" = __ko_value; }"))}else o.unknown&&s.push(o.unknown);t=s.join("");0<e.length&&(t=t+", '_ko_property_writers' : { "+e.join("")+" } ");return t},Jb:function(e,t){for(var n=0;n<e.length;n++)if(i.a.F(e[n].key)==t)return!0;return!1},ha:function(e,t,n,r,s){e&&i.T(e)?!i.Xa(e)||s&&e.t()===r||e(r):(e=t()._ko_property_writers)&&e[n]&&e[n](r)}}}();i.b("expressionRewriting",i.g);i.b("expressionRewriting.bindingRewriteValidators",i.g.S);i.b("expressionRewriting.parseObjectLiteral",i.g.da);i.b("expressionRewriting.preProcessBindings",i.g.ea);i.b("jsonExpressionRewriting",i.g);i.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",i.g.ea);(function(){function e(e){return 8==e.nodeType&&(o?e.text:e.nodeValue).match(u)}function t(e){return 8==e.nodeType&&(o?e.text:e.nodeValue).match(a)}function n(n,r){for(var i=n,s=1,o=[];i=i.nextSibling;){if(t(i)&&(s--,0===s))return o;o.push(i);e(i)&&s++}if(!r)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(e,t){var r=n(e,t);return r?0<r.length?r[r.length-1].nextSibling:e.nextSibling:null}var o=s&&"<!--test-->"===s.createComment("test").text,u=o?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,a=o?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,f={ul:!0,ol:!0};i.e={L:{},childNodes:function(t){return e(t)?n(t):t.childNodes},ba:function(t){if(e(t)){t=i.e.childNodes(t);for(var n=0,r=t.length;n<r;n++)i.removeNode(t[n])}else i.a.oa(t)},P:function(t,n){if(e(t)){i.e.ba(t);for(var r=t.nextSibling,s=0,o=n.length;s<o;s++)r.parentNode.insertBefore(n[s],r)}else i.a.P(t,n)},ab:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},Va:function(t,n,r){r?e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):i.e.ab(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){e(n)&&(n=r(n));return n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},ob:function(t){return(t=e(t))?t[1]:null},Za:function(n){if(f[i.a.u(n)]){var s=n.firstChild;if(s)do if(1===s.nodeType){var o;o=s.firstChild;var u=null;if(o)do if(u)u.push(o);else if(e(o)){var a=r(o,!0);a?o=a:u=[o]}else t(o)&&(u=[o]);while(o=o.nextSibling);if(o=u)for(u=s.nextSibling,a=0;a<o.length;a++)u?n.insertBefore(o[a],u):n.appendChild(o[a])}while(s=s.nextSibling)}}}})();i.b("virtualElements",i.e);i.b("virtualElements.allowedBindings",i.e.L);i.b("virtualElements.emptyNode",i.e.ba);i.b("virtualElements.insertAfter",i.e.Va);i.b("virtualElements.prepend",i.e.ab);i.b("virtualElements.setDomNodeChildren",i.e.P);(function(){i.M=function(){this.Na={}};i.a.extend(i.M.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind");case 8:return null!=i.e.ob(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e):null},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return i.e.ob(e);default:return null}},parseBindingsString:function(e,t,n){try{var r;if(!(r=this.Na[e])){var s=this.Na,o,u="with($context){with($data||{}){return{"+i.g.ea(e)+"}}}";o=new Function("$context","$element",u);r=s[e]=o}return r(t,n)}catch(a){throw a.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+a.message,a}}});i.M.instance=new i.M})();i.b("bindingProvider",i.M);(function(){function e(e,n,r){for(var s=i.e.firstChild(n);n=s;)s=i.e.nextSibling(n),t(e,n,r)}function t(t,r,s){var o=!0,u=1===r.nodeType;u&&i.e.Za(r);if(u&&s||i.M.instance.nodeHasBindings(r))o=n(r,null,t,s).Sb;o&&e(t,r,!u)}function n(e,t,n,s){function o(e){return function(){return f[e]}}function u(){return f}var a=0,f,l,c=i.a.f.get(e,r);if(!t){if(c)throw Error("You cannot apply bindings multiple times to the same element.");i.a.f.set(e,r,!0)}i.j(function(){var r=n&&n instanceof i.A?n:new i.A(i.a.c(n)),v=r.$data;!c&&s&&i.jb(e,r);if(f=("function"==typeof t?t(r,e):t)||i.M.instance.getBindings(e,r))0===a&&(a=1,i.a.w(f,function(t){var n=i.d[t];if(n&&8===e.nodeType&&!i.e.L[t])throw Error("The binding '"+t+"' cannot be used with virtual elements");if(n&&"function"==typeof n.init&&(n=(0,n.init)(e,o(t),u,v,r))&&n.controlsDescendantBindings){if(l!==q)throw Error("Multiple bindings ("+l+" and "+t+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");l=t}}),a=2),2===a&&i.a.w(f,function(t){var n=i.d[t];n&&"function"==typeof n.update&&(0,n.update)(e,o(t),u,v,r)})},null,{$:e});return{Sb:l===q}}i.d={};i.A=function(e,t,n){t?(i.a.extend(this,t),this.$parentContext=t,this.$parent=t.$data,this.$parents=(t.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=e,this.ko=i);this.$data=e;n&&(this[n]=e)};i.A.prototype.createChildContext=function(e,t){return new i.A(e,this,t)};i.A.prototype.extend=function(e){var t=i.a.extend(new i.A,this);return i.a.extend(t,e)};var r="__ko_boundElement";i.jb=function(e,t){if(2!=arguments.length)return i.a.f.get(e,"__ko_bindingContext__");i.a.f.set(e,"__ko_bindingContext__",t)};i.Ka=function(e,t,r){1===e.nodeType&&i.e.Za(e);return n(e,t,r,!0)};i.Ja=function(t,n){1!==n.nodeType&&8!==n.nodeType||e(t,n,!0)};i.Ia=function(e,n){if(n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||w.document.body;t(e,n,!0)};i.na=function(e){switch(e.nodeType){case 1:case 8:var t=i.jb(e);if(t)return t;if(e.parentNode)return i.na(e.parentNode)}return q};i.ub=function(e){return(e=i.na(e))?e.$data:q};i.b("bindingHandlers",i.d);i.b("applyBindings",i.Ia);i.b("applyBindingsToDescendants",i.Ja);i.b("applyBindingsToNode",i.Ka);i.b("contextFor",i.na);i.b("dataFor",i.ub)})();var a={"class":"className","for":"htmlFor"};i.d.attr={update:function(e,t){var n=i.a.c(t())||{};i.a.w(n,function(t,n){n=i.a.c(n);var r=!1===n||null===n||n===q;r&&e.removeAttribute(t);8>=i.a.ca&&t in a?(t=a[t],r?e.removeAttribute(t):e[t]=n):r||e.setAttribute(t,n.toString());"name"===t&&i.a.gb(e,r?"":n.toString())})}};i.d.checked={init:function(e,t,n){i.a.o(e,"click",function(){var r;if("checkbox"==e.type)r=e.checked;else{if("radio"!=e.type||!e.checked)return;r=e.value}var s=t(),o=i.a.c(s);"checkbox"==e.type&&o instanceof Array?i.a.ja(s,e.value,e.checked):i.g.ha(s,n,"checked",r,!0)});"radio"!=e.type||e.name||i.d.uniqueName.init(e,F(!0))},update:function(e,t){var n=i.a.c(t());"checkbox"==e.type?e.checked=n instanceof Array?0<=i.a.k(n,e.value):n:"radio"==e.type&&(e.checked=e.value==n)}};i.d.css={update:function(e,t){var n=i.a.c(t());"object"==typeof n?i.a.w(n,function(t,n){n=i.a.c(n);i.a.ga(e,t,n)}):(n=String(n||""),i.a.ga(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,i.a.ga(e,n,!0))}};i.d.enable={update:function(e,t){var n=i.a.c(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}};i.d.disable={update:function(e,t){i.d.enable.update(e,function(){return!i.a.c(t())})}};i.d.event={init:function(e,t,n,r){var s=t()||{};i.a.w(s,function(s){"string"==typeof s&&i.a.o(e,s,function(e){var o,u=t()[s];if(u){var a=n();try{var f=i.a.N(arguments);f.unshift(r);o=u.apply(r,f)}finally{!0!==o&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===a[s+"Bubble"]&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}};i.d.foreach={Ya:function(e){return function(){var t=e(),n=i.a.ya(t);if(!n||"number"==typeof n.length)return{foreach:t,templateEngine:i.D.sa};i.a.c(t);return{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:i.D.sa}}},init:function(e,t){return i.d.template.init(e,i.d.foreach.Ya(t))},update:function(e,t,n,r,s){return i.d.template.update(e,i.d.foreach.Ya(t),n,r,s)}};i.g.S.foreach=!1;i.e.L.foreach=!0;i.d.hasfocus={init:function(e,t,n){function r(r){e.__ko_hasfocusUpdating=!0;var s=e.ownerDocument;if("activeElement"in s){var o;try{o=s.activeElement}catch(u){o=s.body}r=o===e}s=t();i.g.ha(s,n,"hasfocus",r,!0);e.__ko_hasfocusLastValue=r;e.__ko_hasfocusUpdating=!1}var s=r.bind(null,!0),o=r.bind(null,!1);i.a.o(e,"focus",s);i.a.o(e,"focusin",s);i.a.o(e,"blur",o);i.a.o(e,"focusout",o)},update:function(e,t){var n=!!i.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),i.q.I(i.a.Ga,null,[e,n?"focusin":"focusout"]))}};i.d.hasFocus=i.d.hasfocus;i.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){i.a.fa(e,t())}};var f="__ko_withIfBindingData";n("if");n("ifnot",!1,!0);n("with",!0,!1,function(e,t){return e.createChildContext(t)});i.d.options={init:function(e){if("select"!==i.a.u(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,n){function o(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}function u(e,t){if(d){var n=0<=i.a.k(d,i.h.n(t[0]));i.a.hb(t[0],n)}}var a=0==e.length,f=!a&&e.multiple?e.scrollTop:null;t=i.a.c(t());var l=n(),c=l.optionsIncludeDestroyed,h={},p,d;e.multiple?d=i.a.Z(e.selectedOptions||i.a.Y(e.childNodes,function(e){return e.tagName&&"option"===i.a.u(e)&&e.selected}),function(e){return i.h.n(e)}):0<=e.selectedIndex&&(d=[i.h.n(e.options[e.selectedIndex])]);if(t){"undefined"==typeof t.length&&(t=[t]);var v=i.a.Y(t,function(e){return c||e===q||null===e||!
i.a.c(e._destroy)});"optionsCaption"in l&&(p=i.a.c(l.optionsCaption),null!==p&&p!==q&&v.unshift(h))}else t=[];n=u;l.optionsAfterRender&&(n=function(e,t){u(0,t);i.q.I(l.optionsAfterRender,null,[t[0],e!==h?e:q])});i.a.Aa(e,v,function(e,t,n){n.length&&(d=n[0].selected&&[i.h.n(n[0])]);t=s.createElement("option");e===h?(i.a.fa(t,p),i.h.W(t,q)):(n=o(e,l.optionsValue,e),i.h.W(t,i.a.c(n)),e=o(e,l.optionsText,n),i.a.ib(t,e));return[t]},null,n);d=null;a&&"value"in l&&r(e,i.a.ya(l.value),!0);i.a.zb(e);f&&20<Math.abs(f-e.scrollTop)&&(e.scrollTop=f)}};i.d.options.wa="__ko.optionValueDomData__";i.d.selectedOptions={init:function(e,t,n){i.a.o(e,"change",function(){var r=t(),s=[];i.a.p(e.getElementsByTagName("option"),function(e){e.selected&&s.push(i.h.n(e))});i.g.ha(r,n,"selectedOptions",s)})},update:function(e,t){if("select"!=i.a.u(e))throw Error("values binding applies only to SELECT elements");var n=i.a.c(t());n&&"number"==typeof n.length&&i.a.p(e.getElementsByTagName("option"),function(e){var t=0<=i.a.k(n,i.h.n(e));i.a.hb(e,t)})}};i.d.style={update:function(e,t){var n=i.a.c(t()||{});i.a.w(n,function(t,n){n=i.a.c(n);e.style[t]=n||""})}};i.d.submit={init:function(e,t,n,r){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");i.a.o(e,"submit",function(n){var i,s=t();try{i=s.call(r,e)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}};i.d.text={update:function(e,t){i.a.ib(e,t())}};i.e.L.text=!0;i.d.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++i.d.uniqueName.tb;i.a.gb(e,n)}}};i.d.uniqueName.tb=0;i.d.value={init:function(e,t,n){function r(){u=!1;var r=t(),s=i.h.n(e);i.g.ha(r,n,"value",s)}var s=["change"],o=n().valueUpdate,u=!1;o&&("string"==typeof o&&(o=[o]),i.a.R(s,o),s=i.a.Ma(s));!i.a.ca||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=i.a.k(s,"propertychange")||(i.a.o(e,"propertychange",function(){u=!0}),i.a.o(e,"blur",function(){u&&r()}));i.a.p(s,function(t){var n=r;i.a.Tb(t,"after")&&(n=function(){setTimeout(r,0)},t=t.substring(5));i.a.o(e,t,n)})},update:function(e,t){var n="select"===i.a.u(e),s=i.a.c(t()),o=i.h.n(e);s!==o&&(o=function(){i.h.W(e,s)},o(),n&&setTimeout(o,0));n&&0<e.length&&r(e,s,!1)}};i.d.visible={update:function(e,t){var n=i.a.c(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}};(function(e){i.d[e]={init:function(t,n,r,s){return i.d.event.init.call(this,t,function(){var t={};t[e]=n();return t},r,s)}}})("click");i.v=function(){};i.v.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")};i.v.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")};i.v.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||s;var n=t.getElementById(e);if(!n)throw Error("Cannot find template with ID "+e);return new i.l.i(n)}if(1==e.nodeType||8==e.nodeType)return new i.l.Q(e);throw Error("Unknown template type: "+e)};i.v.prototype.renderTemplate=function(e,t,n,r){e=this.makeTemplateSource(e,r);return this.renderTemplateSource(e,t,n)};i.v.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(e,t).data("isRewritten")};i.v.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n);t=t(e.text());e.text(t);e.data("isRewritten",!0)};i.b("templateEngine",i.v);i.Ea=function(){function e(e,t,n,r){e=i.g.da(e);for(var s=i.g.S,o=0;o<e.length;o++){var u=e[o].key;if(s.hasOwnProperty(u)){var a=s[u];if("function"==typeof a){if(u=a(e[o].value))throw Error(u)}else if(!a)throw Error("This template engine does not support the '"+u+"' binding within its templates")}}n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+i.g.ea(e)+" } })()},'"+n.toLowerCase()+"')";return r.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ab:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return i.Ea.Lb(e,t)},n)},Lb:function(r,i){return r.replace(t,function(t,n,r,s,o){return e(o,n,r,i)}).replace(n,function(t,n){return e(n,"<!-- ko -->","#comment",i)})},qb:function(e,t){return i.s.va(function(n,r){var s=n.nextSibling;s&&s.nodeName.toLowerCase()===t&&i.Ka(s,e,r)})}}}();i.b("__tr_ambtns",i.Ea.qb);(function(){i.l={};i.l.i=function(e){this.i=e};i.l.i.prototype.text=function(){var e=i.a.u(this.i),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.i[e];var t=arguments[0];"innerHTML"===e?i.a.fa(this.i,t):this.i[e]=t};i.l.i.prototype.data=function(e){if(1===arguments.length)return i.a.f.get(this.i,"templateSourceData_"+e);i.a.f.set(this.i,"templateSourceData_"+e,arguments[1])};i.l.Q=function(e){this.i=e};i.l.Q.prototype=new i.l.i;i.l.Q.prototype.text=function(){if(0==arguments.length){var e=i.a.f.get(this.i,"__ko_anon_template__")||{};e.Fa===q&&e.ma&&(e.Fa=e.ma.innerHTML);return e.Fa}i.a.f.set(this.i,"__ko_anon_template__",{Fa:arguments[0]})};i.l.i.prototype.nodes=function(){if(0==arguments.length)return(i.a.f.get(this.i,"__ko_anon_template__")||{}).ma;i.a.f.set(this.i,"__ko_anon_template__",{ma:arguments[0]})};i.b("templateSources",i.l);i.b("templateSources.domElement",i.l.i);i.b("templateSources.anonymousTemplate",i.l.Q)})();(function(){function e(e,t,n){var r;for(t=i.e.nextSibling(t);e&&(r=e)!==t;)e=i.e.nextSibling(r),1!==r.nodeType&&8!==r.nodeType||n(r)}function t(t,n){if(t.length){var r=t[0],s=t[t.length-1];e(r,s,function(e){i.Ia(n,e)});e(r,s,function(e){i.s.nb(e,[n])})}}function n(e){return e.nodeType?e:0<e.length?e[0]:null}function r(e,r,o,u,a){a=a||{};var f=e&&n(e),f=f&&f.ownerDocument,l=a.templateEngine||s;i.Ea.Ab(o,l,f);o=l.renderTemplate(o,u,a,f);if("number"!=typeof o.length||0<o.length&&"number"!=typeof o[0].nodeType)throw Error("Template engine must return an array of DOM nodes");f=!1;switch(r){case"replaceChildren":i.e.P(e,o);f=!0;break;case"replaceNode":i.a.eb(e,o);f=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+r)}f&&(t(o,u),a.afterRender&&i.q.I(a.afterRender,null,[o,u.$data]));return o}var s;i.Ba=function(e){if(!(e==q||e instanceof i.v))throw Error("templateEngine must inherit from ko.templateEngine");s=e};i.za=function(e,t,o,u,a){o=o||{};if((o.templateEngine||s)==q)throw Error("Set a template engine before calling renderTemplate");a=a||"replaceChildren";if(u){var f=n(u);return i.j(function(){var s=t&&t instanceof i.A?t:new i.A(i.a.c(t)),p="function"==typeof e?e(s.$data,s):e,s=r(u,a,p,s,o);"replaceNode"==a&&(u=s,f=n(u))},null,{Qa:function(){return!f||!i.a.aa(f)},$:f&&"replaceNode"==a?f.parentNode:f})}return i.s.va(function(n){i.za(e,t,o,n,"replaceNode")})};i.Rb=function(e,n,s,o,u){function a(e,n){t(n,l);s.afterRender&&s.afterRender(n,e)}function f(t,n){l=u.createChildContext(i.a.c(t),s.as);l.$index=n;var o="function"==typeof e?e(t,l):e;return r(null,"ignoreTargetNode",o,l,s)}var l;return i.j(function(){var e=i.a.c(n)||[];"undefined"==typeof e.length&&(e=[e]);e=i.a.Y(e,function(e){return s.includeDestroyed||e===q||null===e||!i.a.c(e._destroy)});i.q.I(i.a.Aa,null,[o,e,f,s,a])},null,{$:o})};i.d.template={init:function(e,t){var n=i.a.c(t());"string"==typeof n||n.name||1!=e.nodeType&&8!=e.nodeType||(n=1==e.nodeType?e.childNodes:i.e.childNodes(e),n=i.a.Mb(n),(new i.l.Q(e)).nodes(n));return{controlsDescendantBindings:!0}},update:function(e,t,n,r,s){t=i.a.c(t());n={};r=!0;var o,u=null;"string"!=typeof t&&(n=t,t=i.a.c(n.name),"if"in n&&(r=i.a.c(n["if"])),r&&"ifnot"in n&&(r=!i.a.c(n.ifnot)),o=i.a.c(n.data));"foreach"in n?u=i.Rb(t||e,r&&n.foreach||[],n,e,s):r?(s="data"in n?s.createChildContext(o,n.as):s,u=i.za(t||e,s,n,e)):i.e.ba(e);s=u;(o=i.a.f.get(e,"__ko__templateComputedDomDataKey__"))&&"function"==typeof o.B&&o.B();i.a.f.set(e,"__ko__templateComputedDomDataKey__",s&&s.ta()?s:q)}};i.g.S.template=function(e){e=i.g.da(e);return 1==e.length&&e[0].unknown||i.g.Jb(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"};i.e.L.template=!0})();i.b("setTemplateEngine",i.Ba);i.b("renderTemplate",i.za);i.a.Pa=function(){function e(e,t,n,r,i){var s=Math.min,o=Math.max,u=[],a,f=e.length,l,c=t.length,h=c-f||1,p=f+c+1,d,v,m;for(a=0;a<=f;a++)for(v=d,u.push(d=[]),m=s(c,a+h),l=o(0,a-1);l<=m;l++)d[l]=l?a?e[a-1]===t[l-1]?v[l-1]:s(v[l]||p,d[l-1]||p)+1:l+1:a+1;s=[];o=[];h=[];a=f;for(l=c;a||l;)c=u[a][l]-1,l&&c===u[a][l-1]?o.push(s[s.length]={status:n,value:t[--l],index:l}):a&&c===u[a-1][l]?h.push(s[s.length]={status:r,value:e[--a],index:a}):(s.push({status:"retained",value:t[--l]}),--a);if(o.length&&h.length){e=10*f;var g;for(t=n=0;(i||t<e)&&(g=o[n]);n++){for(r=0;u=h[r];r++)if(g.value===u.value){g.moved=u.index;u.moved=g.index;h.splice(r,1);t=r=0;break}t+=r}}return s.reverse()}return function(t,n,r){t=t||[];n=n||[];return t.length<=n.length?e(t,n,"added","deleted",r):e(n,t,"deleted","added",r)}}();i.b("utils.compareArrays",i.a.Pa);(function(){function e(e){for(;e.length&&!i.a.aa(e[0]);)e.splice(0,1);if(1<e.length){for(var t=e[0],n=e[e.length-1],r=[t];t!==n;){t=t.nextSibling;if(!t)return;r.push(t)}Array.prototype.splice.apply(e,[0,e.length].concat(r))}return e}function t(t,n,r,s,o){var u=[];t=i.j(function(){var t=n(r,o,e(u))||[];0<u.length&&(i.a.eb(u,t),s&&i.q.I(s,null,[r,t,o]));u.splice(0,u.length);i.a.R(u,t)},null,{$:t,Qa:function(){return!i.a.pb(u)}});return{O:u,j:t.ta()?t:q}}i.a.Aa=function(n,r,s,o,u){function a(t,n){S=h[n];g!==n&&(E[t]=S);S.ra(g++);e(S.O);v.push(S);w.push(S)}function f(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&i.a.p(t[n].O,function(r){e(r,n,t[n].X)})}r=r||[];o=o||{};var l=i.a.f.get(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===q,h=i.a.f.get(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],p=i.a.Z(h,function(e){return e.X}),d=i.a.Pa(p,r,o.dontLimitMoves),v=[],m=0,g=0,y=[],w=[];r=[];for(var E=[],p=[],S,x=0,T,N;T=d[x];x++)switch(N=T.moved,T.status){case"deleted":N===q&&(S=h[m],S.j&&S.j.B(),y.push.apply(y,e(S.O)),o.beforeRemove&&(r[x]=S,w.push(S)));m++;break;case"retained":a(x,m++);break;case"added":N!==q?a(x,N):(S={X:T.value,ra:i.m(g++)},v.push(S),w.push(S),l||(p[x]=S))}f(o.beforeMove,E);i.a.p(y,o.beforeRemove?i.H:i.removeNode);for(var x=0,l=i.e.firstChild(n),C;S=w[x];x++){S.O||i.a.extend(S,t(n,s,S.X,u,S.ra));for(m=0;d=S.O[m];l=d.nextSibling,C=d,m++)d!==l&&i.e.Va(n,d,C);!S.Fb&&u&&(u(S.X,S.O,S.ra),S.Fb=!0)}f(o.beforeRemove,r);f(o.afterMove,E);f(o.afterAdd,p);i.a.f.set(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult",v)}})();i.b("utils.setDomNodeChildrenFromArrayMapping",i.a.Aa);i.D=function(){this.allowTemplateRewriting=!1};i.D.prototype=new i.v;i.D.prototype.renderTemplateSource=function(e){var t=(9>i.a.ca?0:e.nodes)?e.nodes():null;if(t)return i.a.N(t.cloneNode(!0).childNodes);e=e.text();return i.a.xa(e)};i.D.sa=new i.D;i.Ba(i.D.sa);i.b("nativeTemplateEngine",i.D);(function(){i.ua=function(){var e=this.Ib=function(){if("undefined"==typeof t||!t.tmpl)return 0;try{if(0<=t.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,r,i){i=i||{};if(2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var o=n.data("precompiled");o||(o=n.text()||"",o=t.template(null,"{{ko_with $item.koBindingContext}}"+o+"{{/ko_with}}"),n.data("precompiled",o));n=[r.$data];r=t.extend({koBindingContext:r},i.templateOptions);r=t.tmpl(o,n,r);r.appendTo(s.createElement("div"));t.fragments={};return r};this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"};this.addTemplate=function(e,t){s.write("<script type='text/html' id='"+e+"'>"+t+"</script>")};0<e&&(t.tmpl.tag.ko_code={open:"__.push($1 || '');"},t.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};i.ua.prototype=new i.v;var e=new i.ua;0<e.Ib&&i.Ba(e);i.b("jqueryTmplTemplateEngine",i.ua)})()})})()})();(function(){KnockoutFire={version:"0.0.5"};typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=KnockoutFire:typeof define=="function"&&define.amd?define([],function(){return KnockoutFire}):window.KnockoutFire=KnockoutFire;typeof ko=="undefined"&&(ko=require("knockout"));KnockoutFire.utils={firstMatchedProperty:function(e,t){for(var n in e)if(n.match(t))return n},matchedProperties:function(e,t){var n=[];for(var r in e)r.match(t)&&n.push(r);return n},emptyVal:function(e){if(e==undefined||e==null)return!0;if(typeof e=="object"){var t=!0;for(k in e)KnockoutFire.utils.emptyVal(e[k])||(t=!1);return t}return!1}};KnockoutFire.observable=function(e,t){var n=KnockoutFire.mapObservable(t);n.extend({firebaseObject:{firebaseRef:e,map:t}});return n};KnockoutFire.mapObservable=function(e){var t=null;e=typeof e=="object"?e:{};var n=KnockoutFire.utils.firstMatchedProperty(e,/^\$/),r=KnockoutFire.utils.matchedProperties(e,/^[^\$\.][^\/]+$/);if(n)t=ko.observableArray([]);else if(r.length>0){t=ko.observable({});r.forEach(function(n,r){t()[n]=KnockoutFire.mapObservable(e[n])})}else t=ko.observable("");return t};ko.extenders.firebaseArray=function(e,t){var n=t.firebaseRef,r=t.map,i=KnockoutFire.utils.firstMatchedProperty(r,/^\$/);e.insert=function(e,t,n){var r=this,i=0;if(t){r().some(function(e,n){if(e.firebase.name()==t){i=n;return!0}});r.splice(n?i:i+1,0,e)}else n?r.push(e):r.unshift(e)};e().last=ko.observable();r[".limit"]>0&&(n=n.limit(r[".limit"]));r.hasOwnProperty(".startAt")&&(r[".startAt"]instanceof Object?n=n.startAt(r[".startAt"][".priority"],r[".startAt"][".name"]):r[".startAt"]===undefined?n=n.startAt():n=n.startAt(r[".startAt"]));r.hasOwnProperty(".endAt")&&(r[".endAt"]instanceof Object?n=n.endAt(r[".endAt"][".priority"],r[".endAt"][".name"]):r[".endAt"]===undefined?n=n.endAt():n=n.endAt(r[".endAt"]));n.on("child_added",function(t,n){var s=r[i],o=KnockoutFire.mapObservable(s);t.getPriority()&&(o()[".priority"]=t.getPriority());o.extend({firebaseObject:{firebaseRef:t.ref(),map:s}});e.insert(o,n,r[".reverse"]);e().last(o())});n.on("child_removed",function(t){e.remove(function(e){return t.name()==e.firebase.name()})});n.on("child_moved",function(t,n){var i=e.remove(function(e){return t.name()==e.firebase.name()})[0];t.getPriority()&&(i()[".priority"]=t.getPriority());e.insert(i,n,r[".reverse"])});if(r[".newItem"]){e.newItem={_name:ko.observable()};(function(){var t=KnockoutFire.utils.firstMatchedProperty(r,/^\$/),n=KnockoutFire.utils.matchedProperties(r[t],/^[^\$\.][^\/]+$/);n.forEach(function(t,n){e.newItem[t]=ko.observable()})})();e.newItem.create=function(){var t={},n=KnockoutFire.utils.firstMatchedProperty(r,/^\$/),i=KnockoutFire.utils.matchedProperties(r[n],/^[^\$\.][^\/]+$/);i.forEach(function(n,i){typeof r[".newItem"][n]=="function"?t[n]=r[".newItem"][n]():t[n]=e.newItem[n]()});!o&&KnockoutFire.utils.emptyVal(t)&&(t=!0);if(typeof r[".newItem"][".priority"]=="function"){var s=r[".newItem"][".priority"]();typeof t!="object"&&(t={".value":t});t[".priority"]=s}var o=e.newItem._name(),u=function(t){if(!t){i.forEach(function(t,n){e.newItem[t]("")});typeof r[".newItem"][".on_success"]=="function"&&r[".newItem"][".on_success"]()}};o?e.firebase.child(o).set(t,u):e.firebase.push(t,u)}}};ko.extenders.firebasePrimitive=function(e,t){var n=t.firebaseRef;n.on("value",function(t){e._remoteValue=t.val();e(t.val());t.getPriority()&&(e()[".priority"]=t.getPriority())});e.subscribe(function(t){e._remoteValue!=t&&n.set(t)})};ko.extenders.firebase=function(e,t){var n=t.firebaseRef;e.firebase=n;e()instanceof Object&&(e().firebase=n)};ko.extenders.firebaseObject=function(e,t){var n=t.firebaseRef,r=t.map;if(r[".indexOf"]&&r[".indexOf"].match(/\$/)){var i=r[".indexOf"].replace(/\$[^\/]+/,n.name());n=n.root().child(i)}r[".indexOf"]&&r[".indexOf"].match(/data\(\)/)?n.once("value",function(t){var i=r[".indexOf"].replace("data()",t.val()),s=n.root().child(i);e.extend({_firebaseObject:{firebaseRef:s,map:r}})}):e.extend({_firebaseObject:{firebaseRef:n,map:r}})};ko.extenders._firebaseObject=function(e,t){var n=t.firebaseRef,r=t.map,i=KnockoutFire.utils.firstMatchedProperty(r,/^\$/),s=KnockoutFire.utils.matchedProperties(r,/^[^\$\.][^\/]+$/);i?e.extend({firebaseArray:{firebaseRef:n,map:r}}):s.length>0?s.forEach(function(t,i){var s={firebaseRef:n.child(t),map:r[t]};e()[t].extend({firebaseObject:s})}):e.extend({firebasePrimitive:{firebaseRef:n}});e.extend({firebase:{firebaseRef:n,map:r}});r[".extend"]&&e.extend(r[".extend"])}})();(function(e){"use strict";function t(e){return RegExp("(^|\\s+)"+e+"(\\s+|$)")}function n(e,t){var n=r(e,t)?s:i;n(e,t)}var r,i,s;"classList"in document.documentElement?(r=function(e,t){return e.classList.contains(t)},i=function(e,t){e.classList.add(t)},s=function(e,t){e.classList.remove(t)}):(r=function(e,n){return t(n).test(e.className)},i=function(e,t){r(e,t)||(e.className=e.className+" "+t)},s=function(e,n){e.className=e.className.replace(t(n)," ")});var o={hasClass:r,addClass:i,removeClass:s,toggleClass:n,has:r,add:i,remove:s,toggle:n};"function"==typeof define&&define.amd?define(o):e.classie=o})(window),function(e){"use strict";function t(e){if(e){if("string"==typeof r[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,s=0,o=n.length;o>s;s++)if(t=n[s]+e,"string"==typeof r[t])return t}}var n="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return t}):e.getStyleProperty=t}(window),function(e){"use strict";function t(e){var t=parseFloat(e),n=-1===e.indexOf("%")&&!isNaN(t);return n&&t}function n(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=o.length;n>t;t++){var r=o[t];e[r]=0}return e}function r(e){function r(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var r=s(e);if("none"===r.display)return n();var f={};f.width=e.offsetWidth,f.height=e.offsetHeight;for(var l=f.isBorderBox=!!u&&!!r[u]&&"border-box"===r[u],c=0,h=o.length;h>c;c++){var p=o[c],d=r[p],v=parseFloat(d);f[p]=isNaN(v)?0:v}var m=f.paddingLeft+f.paddingRight,g=f.paddingTop+f.paddingBottom,y=f.marginLeft+f.marginRight,b=f.marginTop+f.marginBottom,w=f.borderLeftWidth+f.borderRightWidth,E=f.borderTopWidth+f.borderBottomWidth,S=l&&i,x=t(r.width);x!==!1&&(f.width=x+(S?0:m+w));var T=t(r.height);return T!==!1&&(f.height=T+(S?0:g+E)),f.innerWidth=f.width-(m+w),f.innerHeight=f.height-(g+E),f.outerWidth=f.width+y,f.outerHeight=f.height+b,f}}var i,u=e("boxSizing");return function(){if(u){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[u]="border-box";var n=document.body||document.documentElement;n.appendChild(e);var r=s(e);i=200===t(r.width),n.removeChild(e)}}(),r}var i=document.defaultView,s=i&&i.getComputedStyle?function(e){return i.getComputedStyle(e,null)}:function(e){return e.currentStyle},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],r):e.getSize=r(e.getStyleProperty)}(window),function(e){"use strict";var t=document.documentElement,n=function(){};t.addEventListener?n=function(e,t,n){e.addEventListener(t,n,!1)}:t.attachEvent&&(n=function(t,n,r){t[n+r]=r.handleEvent?function(){var t=e.event;t.target=t.target||t.srcElement,r.handleEvent.call(r,t)}:function(){var n=e.event;n.target=n.target||n.srcElement,r.call(t,n)},t.attachEvent("on"+n,t[n+r])});var r=function(){};t.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:t.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=void 0}});var i={bind:n,unbind:r};"function"==typeof define&&define.amd?define(i):e.eventie=i}(this),function(e){"use strict";function t(e){"function"==typeof e&&(t.isReady?e():s.push(e))}function n(e){var n="readystatechange"===e.type&&"complete"!==i.readyState;if(!t.isReady&&!n){t.isReady=!0;for(var r=0,u=s.length;u>r;r++){var a=s[r];a()}}}function r(r){return r.bind(i,"DOMContentLoaded",n),r.bind(i,"readystatechange",n),r.bind(e,"load",n),t}var i=e.document,s=[];t.isReady=!1,"function"==typeof define&&define.amd?(t.isReady="function"==typeof requirejs,define(["eventie/eventie"],r)):e.docReady=r(e.eventie)}(this),function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype;r.getListeners=function(e){var t,n,r=this._getEvents();if("object"==typeof e){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if("object"===n)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],s=n.listener.apply(this,t||[]),(s===this._getOnceReturnValue()||n.once===!0)&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){"use strict";function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function i(t,n){e.fn[t]=function(i){if("string"==typeof i){for(var o=r.call(arguments,1),u=0,a=this.length;a>u;u++){var f=this[u],l=e.data(f,t);if(l)if(e.isFunction(l[i])&&"_"!==i.charAt(0)){var c=l[i].apply(l,o);if(void 0!==c)return c}else s("no such method '"+i+"' for "+t+" instance");else s("cannot call methods on "+t+" prior to initialization; "+"attempted to call '"+i+"'")}return this}return this.each(function(){var r=e.data(this,t);r?(r.option(i),r._init()):(r=new n(this,i),e.data(this,t,r))})}}if(e){var s="undefined"==typeof console?t:function(e){console.error(e)};e.bridget=function(e,t){n(t),i(e,t)}}}var r=Array.prototype.slice;"function"==typeof define&&define.amd?define(["jquery"],n):n(e.jQuery)}(window),function(e,t){"use strict";function n(e,t){return e[u](t)}function r(e){if(!e.parentNode){var t=document.createDocumentFragment();t.appendChild(e)}}function i(e,t){r(e);for(var n=e.parentNode.querySelectorAll(t),i=0,s=n.length;s>i;i++)if(n[i]===e)return!0;return!1}function s(e,t){return r(e),n(e,t)}var o,u=function(){if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],n=0,r=e.length;r>n;n++){var i=e[n],s=i+"MatchesSelector";if(t[s])return s}}();if(u){var a=document.createElement("div"),f=n(a,"div");o=f?n:s}else o=i;"function"==typeof define&&define.amd?define(function(){return o}):window.matchesSelector=o}(this,Element.prototype),function(e){"use strict";function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,n,r){function s(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var u=r("transition"),a=r("transform"),f=u&&a,l=!!r("perspective"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[u],h=["transform","transition","transitionDuration","transitionProperty"],p=function(){for(var e={},t=0,n=h.length;n>t;t++){var i=h[t],s=r(i);s&&s!==i&&(e[i]=s)}return e}();t(s.prototype,e.prototype),s.prototype._create=function(){this.css({position:"absolute"})},s.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},s.prototype.getSize=function(){this.size=n(this.element)},s.prototype.css=function(e){var t=this.element.style;for(var n in e){var r=p[n]||n;t[r]=e[n]}},s.prototype.getPosition=function(){var e=i(this.element),t=this.layout.options,n=t.isOriginLeft,r=t.isOriginTop,s=parseInt(e[n?"left":"right"],10),u=parseInt(e[r?"top":"bottom"],10);s=isNaN(s)?0:s,u=isNaN(u)?0:u;var a=this.layout.size;s-=n?a.paddingLeft:a.paddingRight,u-=r?a.paddingTop:a.paddingBottom,this.position.x=s,this.position.y=u},s.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={};t.isOriginLeft?(n.left=this.position.x+e.paddingLeft+"px",n.right=""):(n.right=this.position.x+e.paddingRight+"px",n.left=""),t.isOriginTop?(n.top=this.position.y+e.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+e.paddingBottom+"px",n.top=""),this.css(n),this.emitEvent("layout",[this])};var d=l?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};s.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=parseInt(e,10),s=parseInt(t,10),o=i===this.position.x&&s===this.position.y;if(this.setPosition(e,t),o&&!this.isTransitioning)return this.layoutPosition(),void 0;var u=e-n,a=t-r,f={},l=this.layout.options;u=l.isOriginLeft?u:-u,a=l.isOriginTop?a:-a,f.transform=d(u,a),this.transition({to:f,onTransitionEnd:this.layoutPosition,isCleaning:!0})},s.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},s.prototype.moveTo=f?s.prototype._transitionTo:s.prototype.goTo,s.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},s.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd&&e.onTransitionEnd.call(this)},s.prototype._transition=function(e){var t=this.layout.options.transitionDuration;if(!parseFloat(t))return this._nonTransition(e),void 0;var n=e.to,r=[];for(var i in n)r.push(i);var s={};if(s.transitionProperty=r.join(","),s.transitionDuration=t,this.element.addEventListener(c,this,!1),(e.isCleaning||e.onTransitionEnd)&&this.on("transitionEnd",function(t){return e.isCleaning&&t._removeStyles(n),e.onTransitionEnd&&e.onTransitionEnd.call(t),!0}),e.from){this.css(e.from);var o=this.element.offsetHeight;o=null}this.css(s),this.css(n),this.isTransitioning=!0},s.prototype.transition=s.prototype[u?"_transition":"_nonTransition"],s.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},s.prototype.onotransitionend=function(e){this.ontransitionend(e)},s.prototype.ontransitionend=function(e){e.target===this.element&&(this.removeTransitionStyles(),this.element.removeEventListener(c,this,!1),this.isTransitioning=!1,this.emitEvent("transitionEnd",[this]))},s.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var v={transitionProperty:"",transitionDuration:""};return s.prototype.removeTransitionStyles=function(){this.css(v)},s.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},s.prototype.remove=function(){if(!u||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var e=this;this.on("transitionEnd",function(){return e.removeElem(),!0}),this.hide()},s.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options;this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0})},s.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options;this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:function(){this.css({display:"none"})}})},s.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s}var r=document.defaultView,i=r&&r.getComputedStyle?function(e){return r.getComputedStyle(e,null)}:function(e){return e.currentStyle};"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],n):(e.Outlayer={},e.Outlayer.Item=n(e.EventEmitter,e.getSize,e.getStyleProperty))}(window),function(e){"use strict";function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){return"[object Array]"===l.call(e)}function r(e){var t=[];if(n(e))t=e;else if(e&&"number"==typeof e.length)for(var r=0,i=e.length;i>r;r++)t.push(e[r]);else t.push(e);return t}function i(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()}function s(n,s,l,v,m,g){function y(e,n){if("string"==typeof e&&(e=o.querySelector(e)),!e||!c(e))return u&&u.error("Bad "+this.settings.namespace+" element: "+e),void 0;this.element=e,this.options=t({},this.options),t(this.options,n);var r=++w;this.element.outlayerGUID=r,E[r]=this,this._create(),this.options.isInitLayout&&this.layout()}function b(e,n){e.prototype[n]=t({},y.prototype[n])}var w=0,E={};return y.prototype.settings={namespace:"outlayer",item:g},y.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},t(y.prototype,l.prototype),y.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),t(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},y.prototype.reloadItems=function(){this.items=this._getItems(this.element.children)},y.prototype._getItems=function(e){for(var t=this._filterFindItemElements(e),n=this.settings.item,r=[],i=0,s=t.length;s>i;i++){var o=t[i],u=new n(o,this,this.options.itemOptions);r.push(u)}return r},y.prototype._filterFindItemElements=function(e){e=r(e);for(var t=this.options.itemSelector,n=[],i=0,s=e.length;s>i;i++){var o=e[i];if(c(o))if(t){m(o,t)&&n.push(o);for(var u=o.querySelectorAll(t),a=0,f=u.length;f>a;a++)n.push(u[a])}else n.push(o)}return n},y.prototype.getItemElements=function(){for(var e=[],t=0,n=this.items.length;n>t;t++)e.push(this.items[t].element);return e},y.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},y.prototype._init=y.prototype.layout,y.prototype._resetLayout=function(){this.getSize()},y.prototype.getSize=function(){this.size=v(this.element)},y.prototype._getMeasurement=function(e,t){var n,r=this.options[e];r?("string"==typeof r?n=this.element.querySelector(r):c(r)&&(n=r),this[e]=n?v(n)[t]:r):this[e]=0},y.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},y.prototype._getItemsForLayout=function(e){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n];i.isIgnored||t.push(i)}return t},y.prototype._layoutItems=function(e,t){if(!e||!e.length)return this.emitEvent("layoutComplete",[this,e]),void 0;this._itemsOn(e,"layout",function(){this.emitEvent("layoutComplete",[this,e])});for(var n=[],r=0,i=e.length;i>r;r++){var s=e[r],o=this._getItemLayoutPosition(s);o.item=s,o.isInstant=t,n.push(o)}this._processLayoutQueue(n)},y.prototype._getItemLayoutPosition=
function(){return{x:0,y:0}},y.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];this._positionItem(r.item,r.x,r.y,r.isInstant)}},y.prototype._positionItem=function(e,t,n,r){r?e.goTo(t,n):e.moveTo(t,n)},y.prototype._postLayout=function(){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))},y.prototype._getContainerSize=f,y.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},y.prototype._itemsOn=function(e,t,n){function r(){return i++,i===s&&n.call(o),!0}for(var i=0,s=e.length,o=this,u=0,a=e.length;a>u;u++){var f=e[u];f.on(t,r)}},y.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},y.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},y.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;n>t;t++){var r=e[t];this.ignore(r)}}},y.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,n=e.length;n>t;t++){var r=e[t],i=h(this.stamps,r);-1!==i&&this.stamps.splice(i,1),this.unignore(r)}},y.prototype._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=r(e)):void 0},y.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;t>e;e++){var n=this.stamps[e];this._manageStamp(n)}}},y.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},y.prototype._manageStamp=f,y.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,r=v(e),i={left:t.left-n.left-r.marginLeft,top:t.top-n.top-r.marginTop,right:n.right-t.right-r.marginRight,bottom:n.bottom-t.bottom-r.marginBottom};return i},y.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},y.prototype.bindResize=function(){this.isResizeBound||(n.bind(e,"resize",this),this.isResizeBound=!0)},y.prototype.unbindResize=function(){n.unbind(e,"resize",this),this.isResizeBound=!1},y.prototype.onresize=function(){function e(){t.resize()}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},y.prototype.resize=function(){var e=v(this.element),t=this.size&&e;t&&e.innerWidth===this.size.innerWidth||(this.layout(),delete this.resizeTimeout)},y.prototype.addItems=function(e){var t=this._getItems(e);if(t.length)return this.items=this.items.concat(t),t},y.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},y.prototype.prepended=function(e){var t=this._getItems(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)}},y.prototype.reveal=function(e){if(e&&e.length)for(var t=0,n=e.length;n>t;t++){var r=e[t];r.reveal()}},y.prototype.hide=function(e){if(e&&e.length)for(var t=0,n=e.length;n>t;t++){var r=e[t];r.hide()}},y.prototype.getItem=function(e){for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];if(r.element===e)return r}},y.prototype.getItems=function(e){if(e&&e.length){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n],s=this.getItem(i);s&&t.push(s)}return t}},y.prototype.remove=function(e){e=r(e);var t=this.getItems(e);if(t&&t.length){this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])});for(var n=0,i=t.length;i>n;n++){var s=t[n];s.remove();var o=h(this.items,s);this.items.splice(o,1)}}},y.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];r.destroy()}this.unbindResize(),delete this.element.outlayerGUID,a&&a.removeData(this.element,this.settings.namespace)},y.data=function(e){var t=e&&e.outlayerGUID;return t&&E[t]},y.create=function(e,n){function r(){y.apply(this,arguments)}return t(r.prototype,y.prototype),b(r,"options"),b(r,"settings"),t(r.prototype.options,n),r.prototype.settings.namespace=e,r.data=y.data,r.Item=function(){g.apply(this,arguments)},r.Item.prototype=new g,r.prototype.settings.item=r.Item,s(function(){for(var t=i(e),n=o.querySelectorAll(".js-"+t),s="data-"+t+"-options",f=0,l=n.length;l>f;f++){var c,h=n[f],p=h.getAttribute(s);try{c=p&&JSON.parse(p)}catch(d){u&&u.error("Error parsing "+s+" on "+h.nodeName.toLowerCase()+(h.id?"#"+h.id:"")+": "+d);continue}var v=new r(h,c);a&&a.data(h,e,v)}}),a&&a.bridget&&a.bridget(e,r),r},y.Item=g,y}var o=e.document,u=e.console,a=e.jQuery,f=function(){},l=Object.prototype.toString,c="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},h=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1};"function"==typeof define&&define.amd?define(["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],s):e.Outlayer=s(e.eventie,e.docReady,e.EventEmitter,e.getSize,e.matchesSelector,e.Outlayer.Item)}(window),function(e){"use strict";function t(){function e(t){for(var n in e.defaults)this[n]=e.defaults[n];for(n in t)this[n]=t[n]}return n.Rect=e,e.defaults={x:0,y:0,width:0,height:0},e.prototype.contains=function(e){var t=e.width||0,n=e.height||0;return this.x<=e.x&&this.y<=e.y&&this.x+this.width>=e.x+t&&this.y+this.height>=e.y+n},e.prototype.overlaps=function(e){var t=this.x+this.width,n=this.y+this.height,r=e.x+e.width,i=e.y+e.height;return r>this.x&&t>e.x&&i>this.y&&n>e.y},e.prototype.getMaximalFreeRects=function(t){if(!this.overlaps(t))return!1;var n,r=[],i=this.x+this.width,s=this.y+this.height,o=t.x+t.width,u=t.y+t.height;return this.y<t.y&&(n=new e({x:this.x,y:this.y,width:this.width,height:t.y-this.y}),r.push(n)),i>o&&(n=new e({x:o,y:this.y,width:i-o,height:this.height}),r.push(n)),s>u&&(n=new e({x:this.x,y:u,width:this.width,height:s-u}),r.push(n)),this.x<t.x&&(n=new e({x:this.x,y:this.y,width:t.x-this.x,height:this.height}),r.push(n)),r},e.prototype.canFit=function(e){return this.width>=e.width&&this.height>=e.height},e}var n=e.Packery=function(){};"function"==typeof define&&define.amd?define(t):(e.Packery=e.Packery||{},e.Packery.Rect=t())}(window),function(e){"use strict";function t(e){function t(e,t){this.width=e||0,this.height=t||0,this.reset()}return t.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var t=new e({x:0,y:0,width:this.width,height:this.height});this.spaces.push(t)},t.prototype.pack=function(e){for(var t=0,n=this.spaces.length;n>t;t++){var r=this.spaces[t];if(r.canFit(e)){this.placeInSpace(e,r);break}}},t.prototype.placeInSpace=function(e,t){e.x=t.x,e.y=t.y,this.placed(e)},t.prototype.placed=function(e){for(var n=[],r=0,i=this.spaces.length;i>r;r++){var s=this.spaces[r],o=s.getMaximalFreeRects(e);o?n.push.apply(n,o):n.push(s)}this.spaces=n,t.mergeRects(this.spaces),this.spaces.sort(t.spaceSorterTopLeft)},t.mergeRects=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];if(r){var i=e.slice(0);i.splice(t,1);for(var s=0,o=0,u=i.length;u>o;o++){var a=i[o],f=t>o?0:1;r.contains(a)&&(e.splice(o+f-s,1),s++)}}}return e},t.spaceSorterTopLeft=function(e,t){return e.y-t.y||e.x-t.x},t.spaceSorterLeftTop=function(e,t){return e.x-t.x||e.y-t.y},t}if("function"==typeof define&&define.amd)define(["./rect"],t);else{var n=e.Packery=e.Packery||{};n.Packer=t(n.Rect)}}(window),function(e){"use strict";function t(e,t,n){var r=e("transform"),i=function(){t.Item.apply(this,arguments)};return i.prototype=new t.Item,i.prototype._create=function(){this.rect=new n,this.placeRect=new n,this.css({position:"absolute"})},i.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&r&&(this.element.style[r]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},i.prototype.dragMove=function(e,t){this.didDrag=!0;var n=this.layout.size;e-=n.paddingLeft,t-=n.paddingTop,this.positionPlaceRect(e,t)},i.prototype.dragStop=function(){this.getPosition();var e=this.position.x!==this.placeRect.x,t=this.position.y!==this.placeRect.y;this.needsPositioning=e||t,this.didDrag=!1},i.prototype.positionPlaceRect=function(e,t,n){this.placeRect.x=this.getPlaceRectCoord(e,!0),this.placeRect.y=this.getPlaceRectCoord(t,!1,n)},i.prototype.getPlaceRectCoord=function(e,t,n){var r=t?"Width":"Height",i=this.size["outer"+r],s=this.layout[t?"columnWidth":"rowHeight"],o=this.layout.size["inner"+r];t||(o=Math.max(o,this.layout.maxY),this.layout.rowHeight||(o-=this.layout.gutter));var u;if(s){s+=this.layout.gutter,o+=t?this.layout.gutter:0,e=Math.round(e/s);var a=Math[t?"floor":"ceil"](o/s);a-=Math.ceil(i/s),u=a}else u=o-i;return e=n?e:Math.min(e,u),e*=s||1,Math.max(0,e)},i.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},i}"function"==typeof define&&define.amd?define(["get-style-property/get-style-property","outlayer/outlayer","./rect"],t):e.Packery.Item=t(e.getStyleProperty,e.Outlayer,e.Packery.Rect)}(window),function(e){"use strict";function t(e,t,n,r,i,s){var o=n.create("packery");return o.Item=o.prototype.settings.item=s,o.prototype._create=function(){n.prototype._create.call(this),this.packer=new i,this.stamp(this.options.stamped);var e=this;this.handleDraggabilly={dragStart:function(t){e.itemDragStart(t.element)},dragMove:function(t){e.itemDragMove(t.element,t.position.x,t.position.y)},dragEnd:function(t){e.itemDragEnd(t.element)}},this.handleUIDraggable={start:function(t){e.itemDragStart(t.currentTarget)},drag:function(t,n){e.itemDragMove(t.currentTarget,n.position.left,n.position.top)},stop:function(t){e.itemDragEnd(t.currentTarget)}}},o.prototype._resetLayout=function(){this.getSize(),this.size=t(this.element),this._getMeasurements(),this.packer.width=this.size.innerWidth+this.gutter,this.packer.height=Number.POSITIVE_INFINITY,this.packer.reset(),this.maxY=0},o.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},o.prototype._getItemLayoutPosition=function(e){return this._packItem(e),e.rect},o.prototype._packItem=function(e){this._setRectSize(e.element,e.rect),this.packer.pack(e.rect),this._setMaxY(e.rect)},o.prototype._setMaxY=function(e){this.maxY=Math.max(e.y+e.height,this.maxY)},o.prototype._setRectSize=function(e,n){var r=t(e),i=r.outerWidth,s=r.outerHeight,o=this.columnWidth+this.gutter,u=this.rowHeight+this.gutter;i=this.columnWidth?Math.ceil(i/o)*o:i+this.gutter,s=this.rowHeight?Math.ceil(s/u)*u:s+this.gutter,n.width=Math.min(i,this.packer.width),n.height=s},o.prototype._getContainerSize=function(){return{height:this.maxY-this.gutter}},o.prototype._manageStamp=function(e){var t,n=this.getItem(e);if(n&&n.isPlacing)t=n.placeRect;else{var i=this._getElementOffset(e);t=new r({x:i.left,y:i.top})}this._setRectSize(e,t),this.packer.placed(t),this._setMaxY(t)},o.prototype.sortItemsByPosition=function(){this.items.sort(function(e,t){return e.position.y-t.position.y||e.position.x-t.position.x})},o.prototype.fit=function(e,t,n){var r=this.getItem(e);r&&(this._getMeasurements(),this.stamp(r.element),r.getSize(),r.isPlacing=!0,t=void 0===t?r.rect.x:t,n=void 0===n?r.rect.y:n,r.positionPlaceRect(t,n,!0),this._bindFitEvents(r),r.moveTo(r.placeRect.x,r.placeRect.y),this.layout(),this.unstamp(r.element),this.sortItemsByPosition(),r.isPlacing=!1,r.copyPlaceRectPosition())},o.prototype._bindFitEvents=function(e){function t(){r++,2===r&&n.emitEvent("fitComplete",[n,e])}var n=this,r=0;e.on("layout",function(){return t(),!0}),this.on("layoutComplete",function(){return t(),!0})},o.prototype.itemDragStart=function(e){this.stamp(e);var t=this.getItem(e);t&&t.dragStart()},o.prototype.itemDragMove=function(e,t,n){function r(){s.layout(),delete s.dragTimeout}var i=this.getItem(e);i&&i.dragMove(t,n);var s=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(r,40)},o.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},o.prototype.itemDragEnd=function(t){var n,r=this.getItem(t);if(r&&(n=r.didDrag,r.dragStop()),!r||!n&&!r.needsPositioning)return this.unstamp(t),void 0;e.add(r.element,"is-positioning-post-drag");var i=this._getDragEndLayoutComplete(t,r);r.needsPositioning?(r.on("layout",i),r.moveTo(r.placeRect.x,r.placeRect.y)):r&&r.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",i),this.layout()},o.prototype._getDragEndLayoutComplete=function(t,n){var r=n&&n.needsPositioning,i=0,s=r?2:1,o=this;return function(){return i++,i!==s?!0:(n&&(e.remove(n.element,"is-positioning-post-drag"),n.isPlacing=!1,n.copyPlaceRectPosition()),o.unstamp(t),o.sortItemsByPosition(),r&&o.emitEvent("dragItemPositioned",[o,n]),!0)}},o.prototype.bindDraggabillyEvents=function(e){e.on("dragStart",this.handleDraggabilly.dragStart),e.on("dragMove",this.handleDraggabilly.dragMove),e.on("dragEnd",this.handleDraggabilly.dragEnd)},o.prototype.bindUIDraggableEvents=function(e){e.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},o.Rect=r,o.Packer=i,o}"function"==typeof define&&define.amd?define(["classie/classie","get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],t):e.Packery=t(e.classie,e.getSize,e.Outlayer,e.Packery.Rect,e.Packery.Packer,e.Packery.Item)}(window);var firebaseRef=new Firebase("https://linkchain.firebaseio.com/"),firebaseRefLinks=new Firebase("https://linkchain.firebaseio.com/board/links"),pckry=new Packery(document.querySelector("#items-wrap"),{isLayoutInstant:!0});setInterval(function(){pckry.layout()},1500);var auth=new FirebaseSimpleLogin(firebaseRef,function(e,t){if(t){document.querySelector(".overlay").style.opacity="0";setTimeout(function(){document.querySelector(".overlay").style.display="none"},750);var n=ko.applyBindings(new linkchain(t.id,t.displayName))}});